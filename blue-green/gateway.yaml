# This Gateway manifest creates a GKE-managed load balancer that acts as the
# single entry point for all traffic to the blue and green environments.
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: blue-green-gateway
  annotations:
    networking.gke.io/internal-address-access-mode: global
spec:
  # gatewayClassName specifies the type of load balancer to provision.
  gatewayClassName: gke-l7-regional-external-managed
  # listeners define the ports and protocols the Gateway will accept traffic on.
  listeners:
    - protocol: HTTP
      port: 80
      name: http
